# Twice-Thinking Skill 使用说明

## 是什么？

Twice-Thinking 是一个 AI Agent Skill，专门用来通过多轮追问来深入理解用户需求。

## 为什么需要这个 Skill？

在实际开发中，用户的需求往往不够清晰：
- "开发一个应用" - 太笼统
- "做一个工具" - 不知道具体要什么
- "集成某某功能" - 不清楚边界条件

这会导致：
1. 需求不明确就开始开发
2. 做到一半发现方向错了
3. 重复沟通浪费时间

## 工作流程

```
用户提出需求
    ↓
AI 调用 analyze_requirement
    ↓
AI 返回初始追问计划（3-5个问题）
    ↓
用户回答问题
    ↓
AI 调用 record_answer
    ↓
AI 继续追问或生成需求总结
    ↓
需求足够明确 → AI 调用 get_requirement_summary
```

## 追问策略

### 1. 从简单到复杂
先问大局观的问题，再深入细节

**示例：**
- ❌ 坏："数据库用什么？架构是什么？API怎么设计？缓存怎么做？"
- ✓ 好：
  - "这个应用主要解决什么问题？"
  - "目标用户大概有多少？"
  - "是 Web 应用还是桌面应用？"
  - "预期每天有多少人使用？"

### 2. 一次只问 1-2 个问题
避免信息过载，让用户轻松回答

### 3. 每次追问都有目的
在内部记录每个问题为什么问，这样在总结时能体现推理过程

### 4. 适时总结
当 7 个维度基本覆盖或用户主动说"需求大概就是这样"时，主动生成总结

## 集成方式

### 作为 MCP Server 使用

1. 配置到 Claude Desktop 或支持 MCP 的工具
2. 当用户提出需求时，AI 会自动调用 analyze_requirement
3. AI 逐步调用 record_answer 记录用户回答
4. 最后调用 get_requirement_summary 获取完整的需求文档

### 手动使用（测试）

```bash
cd D:\twice-thinking\skill
python -m mcp.server --transport stdio
```

然后可以通过 stdin/stdout 交互调用工具。

## 与用户对话示例

### 示例 1：开发需求

```
用户：帮我开发一个应用

AI（调用 analyze_requirement）：
让我先了解一下你的需求...

1. 这个应用主要解决什么问题？是提高效率还是解决某个具体痛点？
2. 目标用户是谁？是企业用户还是个人用户？
3. 你期望这是个 Web 应用、桌面应用还是移动应用？

用户：做一个效率工具，给团队用的，桌面应用

AI（调用 record_answer）：
明白了，桌面应用给团队用效率工具。

4. 团队大概有多少人？
5. 主要的使用场景是什么？比如项目管理、文档协作还是其他？
6. 你有哪些特别的需求吗？比如数据同步、离线使用、权限管理？

用户：5-10人，主要是项目管理和文档协作。需要数据同步，不需要权限管理太复杂

AI（调用 record_answer）：
好的，我记录下来。

7. 期望支持什么文件格式？需要和哪些现有系统集成？
8. 界面风格有什么偏好吗？现代简约还是传统丰富？

用户：支持常见的 Office 格式，和公司现有的 SharePoint 集成

AI（调用 get_requirement_summary）：
## 需求总结

### 基本信息
- 项目类型：桌面应用
- 目标用户：5-10人团队
- 主要用途：项目管理和文档协作

### 功能需求
- 文档创建和编辑
- 项目任务管理
- 数据同步（Office 格式）
- SharePoint 集成
- 团队协作功能
- 不需要复杂的权限管理系统

### 技术要求
- 桌面应用（Windows/Mac）
- 文件格式：支持 Office 格式（Word、Excel、PowerPoint）
- 外部集成：SharePoint API
- 界面风格：现代简约

### 使用场景
- 团队日常协作
- 项目进度跟踪
- 文档共享和编辑
- 企业数据同步

### 成功标准
- 支持基础的 CRUD 操作
- 能够完成一个项目的完整生命周期
- 数据同步稳定可靠

### 下一步建议
基于以上澄清，建议：
1. 开始需求文档细化
2. 进行技术方案设计
3. 开始开发实现
```

## 配置建议

在 AI 工具的 system prompt 中添加：

```
当用户提出开发或技术相关需求时，首先使用 Twice-Thinking Skill 进行需求澄清。

工作流程：
1. 调用 analyze_requirement 分析初始需求
2. 逐步使用 record_answer 记录用户回答
3. 当需求足够明确时，调用 get_requirement_summary 生成结构化文档
4. 将生成的内容展示给用户确认，收到确认后开始实际开发
```

这样可以避免需求不明确导致的返工。
```
